<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Premier League â€“ EF.CUP interface</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    :root {
      --burgundy: #800020;
      --silver: #c0c0c0;
      --bg-dark: #050509;
      --bg-card: #12131a;
      --text-main: #f5f5f5;
      --text-muted: #b4b4b4;
    }

    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 20px 10px 40px;
      background: radial-gradient(circle at top, var(--burgundy), var(--bg-dark));
      color: var(--text-main);
      transition: background 0.25s, color 0.25s;
    }

    body.light {
      background: #f2f3f8;
      color: #111;
    }

    .app {
      width: 100%;
      max-width: 1100px;
      background: rgba(5, 5, 10, 0.96);
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      box-shadow: 0 20px 38px rgba(0, 0, 0, 0.7);
      padding: 18px 14px 24px;
      animation: popIn 0.4s ease-out;
    }

    body.light .app {
      background: #ffffff;
      border-color: rgba(0, 0, 0, 0.08);
      box-shadow: 0 16px 30px rgba(0, 0, 0, 0.12);
    }

    @keyframes popIn {
      from { opacity: 0; transform: translateY(10px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    /* Header */
    .header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 16px;
    }

    .title-block h1 {
      font-size: 1.35rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--silver);
    }

    .title-block small {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .theme-btn {
      padding: 8px 16px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 0.85rem;
      font-weight: 600;
      background: var(--silver);
      color: var(--burgundy);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    body.light .theme-btn {
      background: var(--burgundy);
      color: #fff;
    }

    /* Nav tabs */
    .tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
    }

    .tab-btn {
      flex: 1 1 110px;
      text-align: center;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.26);
      background: rgba(10, 10, 16, 0.8);
      color: var(--text-main);
      font-size: 0.84rem;
      cursor: pointer;
      transition: 0.2s;
    }

    .tab-btn.active {
      background: var(--silver);
      color: var(--burgundy);
      border-color: var(--silver);
    }

    body.light .tab-btn {
      background: #f1f1f5;
      color: #222;
      border-color: #d1d1dd;
    }

    body.light .tab-btn.active {
      background: var(--burgundy);
      color: #fff;
      border-color: var(--burgundy);
    }

    /* Sections */
    .section {
      display: none;
      animation: fadeIn 0.25s ease-out;
    }

    .section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(6px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Panels */
    .panel {
      background: var(--bg-card);
      border-radius: 14px;
      padding: 10px 10px 14px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      margin-bottom: 14px;
    }

    body.light .panel {
      background: #f6f7fb;
      border-color: rgba(0, 0, 0, 0.08);
    }

    .panel-title {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 6px;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      color: var(--silver);
    }

    body.light .panel-title {
      color: #333;
    }

    .hint {
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    body.light .hint {
      color: #555;
    }

    /* Result/fixture form */
    .form-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
      align-items: center;
    }

    .form-grid select,
    .form-grid input {
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid #373744;
      background: #101118;
      color: var(--text-main);
      font-size: 0.82rem;
      min-width: 90px;
    }

    .form-grid input[type="number"] {
      width: 60px;
      text-align: center;
    }

    body.light .form-grid select,
    body.light .form-grid input {
      background: #fff;
      border-color: #cfd1dd;
      color: #111;
    }

    .form-grid .date-input {
      min-width: 130px;
    }

    .form-grid button {
      padding: 7px 15px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: var(--silver);
      color: var(--burgundy);
      font-weight: 600;
      font-size: 0.85rem;
      margin-left: auto;
    }

    .form-grid button:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
    }

    body.light .form-grid button {
      background: var(--burgundy);
      color: #fff;
    }

    /* Tables */
    .table-wrap {
      overflow-x: auto;
      margin-top: 6px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
      min-width: 720px;
    }

    thead {
      background: #000;
    }

    body.light thead {
      background: #dcdde6;
    }

    th {
      padding: 9px 6px;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      border-bottom: 1px solid #3a3a44;
      text-align: center;
    }

    td {
      padding: 8px 6px;
      font-size: 0.84rem;
      text-align: center;
      border-bottom: 1px solid #262635;
    }

    tbody tr {
      background: #171722;
      transition: background 0.16s, transform 0.12s;
    }

    tbody tr:nth-child(even) {
      background: #13141c;
    }

    tbody tr:hover {
      background: #252636;
      transform: translateY(-1px);
    }

    body.light tbody tr {
      background: #ffffff;
    }

    body.light tbody tr:nth-child(even) {
      background: #f3f4f9;
    }

    body.light tbody tr:hover {
      background: #e8e9f3;
    }

    .club-col {
      width: 32%;
      text-align: left;
    }

    .team {
      display: flex;
      align-items: center;
      gap: 9px;
      white-space: nowrap;
    }

    .team img {
      width: 22px;
      height: 22px;
      flex-shrink: 0;
    }

    .badge {
      display: inline-block;
      padding: 2px 7px;
      border-radius: 999px;
      font-size: 0.65rem;
      margin-right: 4px;
      text-transform: uppercase;
    }

    .badge.top4 { background: #1f9d55; }
    .badge.europa { background: #cfae25; }
    .badge.releg { background: #d34141; }

    .history-list {
      list-style: none;
      max-height: 250px;
      overflow-y: auto;
      margin-top: 6px;
    }

    .history-item {
      display: flex;
      justify-content: space-between;
      padding: 6px 4px;
      border-bottom: 1px solid #262635;
      font-size: 0.82rem;
    }

    body.light .history-item {
      border-color: #dedfec;
    }

    .history-main {
      font-weight: 500;
    }

    .history-meta {
      color: var(--text-muted);
      font-size: 0.74rem;
    }

    .pill {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 0.7rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      margin-left: 4px;
    }

    body.light .pill {
      border-color: rgba(0, 0, 0, 0.25);
    }

    .danger {
      color: #ff8a8a;
    }

    .reset-btn {
      margin-top: 8px;
      font-size: 0.8rem;
      background: transparent;
      border: 1px solid rgba(255,255,255,0.26);
      color: var(--text-muted);
      padding: 5px 10px;
      border-radius: 999px;
      cursor: pointer;
    }

    body.light .reset-btn {
      border-color: #c2c3d0;
      color: #555;
    }

    .reset-btn:hover {
      border-color: #ff6b6b;
      color: #ffaaaa;
    }

    body.light .reset-btn:hover {
      border-color: #ff6b6b;
      color: #c30000;
    }

    @media (max-width: 640px) {
      .form-grid {
        flex-direction: column;
        align-items: flex-start;
      }
      .form-grid button {
        margin-left: 0;
        width: 100%;
        text-align: center;
      }
    }
  </style>
</head>

<body>
  <div class="app">
    <header class="header">
      <div class="title-block">
        <h1>Premier League 2025 â€“ Harun Design</h1>
        <small>Full EPL mini-system: standings, fixtures &amp; match history (auto updated)</small>
      </div>
      <button class="theme-btn" id="themeToggle">ðŸŒ™ Dark / Light</button>
    </header>

    <!-- TABS -->
    <nav class="tabs">
      <button class="tab-btn active" data-target="standings">Standings</button>
      <button class="tab-btn" data-target="fixtures">Fixtures</button>
      <button class="tab-btn" data-target="history">Match History</button>
    </nav>

    <!-- STANDINGS SECTION -->
    <section id="standings" class="section active">
      <div class="panel">
        <div class="panel-title">Table overview</div>
        <p class="hint">
          <span class="badge top4">Top 4</span> Champions League &nbsp;
          <span class="badge europa">Europa</span> &nbsp;
          <span class="badge releg">18â€“20</span> Relegation zone
        </p>
      </div>

      <div class="panel">
        <div class="panel-title">Current Table</div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Pos</th>
                <th class="club-col">Club</th>
                <th>MP</th>
                <th>W</th>
                <th>D</th>
                <th>L</th>
                <th>GF</th>
                <th>GA</th>
                <th>GD</th>
                <th>Pts</th>
              </tr>
            </thead>
            <tbody id="tableBody"></tbody>
          </table>
        </div>
        <button class="reset-btn" id="resetAll">Reset all data</button>
      </div>
    </section>

    <!-- FIXTURES SECTION -->
    <section id="fixtures" class="section">
      <div class="panel">
        <div class="panel-title">Add match (fixture + result)</div>
        <p class="hint">
          Choose date, home &amp; away teams, enter goals, then press <b>Save Match</b>.
          Table, fixtures list and history will all update automatically.
        </p>

        <form id="matchForm">
          <div class="form-grid">
            <input type="date" id="matchDate" class="date-input" />
            <select id="homeTeam"></select>
            <input type="number" id="homeGoals" min="0" placeholder="Home goals" />
            <span>vs</span>
            <input type="number" id="awayGoals" min="0" placeholder="Away goals" />
            <select id="awayTeam"></select>
            <button type="submit">Save Match</button>
          </div>
        </form>
      </div>

      <div class="panel">
        <div class="panel-title">All recorded fixtures</div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Date</th>
                <th class="club-col">Match</th>
                <th>Score</th>
              </tr>
            </thead>
            <tbody id="fixturesBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- HISTORY SECTION -->
    <section id="history" class="section">
      <div class="panel">
        <div class="panel-title">Match history log</div>
        <p class="hint">
          Most recent matches appear on top. Data is stored in your browser (localStorage)
          until you reset.
        </p>
        <ul class="history-list" id="historyList"></ul>
      </div>
    </section>
  </div>

<script>
  // ---------- DATA SETUP ----------
  const initialTeams = [
    { name: "Arsenal", logo: "https://upload.wikimedia.org/wikipedia/en/5/53/Arsenal_FC.png" },
    { name: "Man City", logo: "https://upload.wikimedia.org/wikipedia/en/e/eb/Manchester_City_FC_badge.png" },
    { name: "Liverpool", logo: "https://upload.wikimedia.org/wikipedia/en/0/0c/Liverpool_FC.png" },
    { name: "Chelsea", logo: "https://upload.wikimedia.org/wikipedia/en/c/cc/Chelsea_FC.png" },
    { name: "Tottenham", logo: "https://upload.wikimedia.org/wikipedia/en/b/b4/Tottenham_Hotspur.png" },
    { name: "Aston Villa", logo: "https://upload.wikimedia.org/wikipedia/en/f/f9/Aston_Villa_FC.png" },
    { name: "Newcastle", logo: "https://upload.wikimedia.org/wikipedia/en/5/56/Newcastle_United_Logo.png" },
    { name: "Man United", logo: "https://upload.wikimedia.org/wikipedia/en/7/7a/Manchester_United_FC_crest.png" },
    { name: "Brighton", logo: "https://upload.wikimedia.org/wikipedia/en/6/6d/Brighton_%26_Hove_Albion_logo.png" },
    { name: "West Ham", logo: "https://upload.wikimedia.org/wikipedia/en/c/c2/West_Ham_United_FC_logo.png" },
    { name: "Brentford", logo: "https://upload.wikimedia.org/wikipedia/en/3/3c/Brentford_FC_crest.png" },
    { name: "Wolves", logo: "https://upload.wikimedia.org/wikipedia/en/f/fc/Wolverhampton_Wanderers.png" },
    { name: "Everton", logo: "https://upload.wikimedia.org/wikipedia/en/7/7c/Everton_FC_logo.png" },
    { name: "Crystal Palace", logo: "https://upload.wikimedia.org/wikipedia/en/0/0c/Crystal_Palace_FC_logo.png" },
    { name: "Fulham", logo: "https://upload.wikimedia.org/wikipedia/en/6/60/Fulham_FC.png" },
    { name: "Bournemouth", logo: "https://upload.wikimedia.org/wikipedia/en/e/e5/AFC_Bournemouth_%282013%E2%80%93%29.png" },
    { name: "Nottingham Forest", logo: "https://upload.wikimedia.org/wikipedia/en/1/1f/Nottingham_Forest_logo.png" },
    { name: "Leicester City", logo: "https://upload.wikimedia.org/wikipedia/en/9/9b/Leicester_City_crest.png" },
    { name: "Southampton", logo: "https://upload.wikimedia.org/wikipedia/en/c/c9/Southampton_FC.png" },
    { name: "Leeds United", logo: "https://upload.wikimedia.org/wikipedia/en/1/13/Leeds_United_Logo.png" }
  ];

  function createEmptyTeams() {
    return initialTeams.map(t => ({
      ...t,
      mp: 0, w: 0, d: 0, l: 0,
      gf: 0, ga: 0
    }));
  }

  const STORAGE_KEY = "harun_epl_state_v1";
  const THEME_KEY = "harun_epl_theme";

  let state = {
    teams: createEmptyTeams(),
    fixtures: [],   // {date, home, away, homeGoals, awayGoals}
    history: []     // {timestamp, text, meta}
  };

  // ---------- LOCAL STORAGE ----------
  function loadState() {
    try {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (raw) {
        const parsed = JSON.parse(raw);
        if (parsed && parsed.teams && parsed.fixtures && parsed.history) {
          state = parsed;
        }
      }
    } catch(e) {
      console.warn("Could not load saved state", e);
    }
  }

  function saveState() {
    try {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    } catch(e) {
      console.warn("Could not save state", e);
    }
  }

  // ---------- HELPERS ----------
  function points(team) { return team.w * 3 + team.d; }
  function gd(team) { return team.gf - team.ga; }

  function sortTeams() {
    return [...state.teams].sort((a, b) => {
      const ptsDiff = points(b) - points(a);
      if (ptsDiff !== 0) return ptsDiff;

      const gdDiff = gd(b) - gd(a);
      if (gdDiff !== 0) return gdDiff;

      const gfDiff = b.gf - a.gf;
      if (gfDiff !== 0) return gfDiff;

      return a.name.localeCompare(b.name);
    });
  }

  function findTeam(name) {
    return state.teams.find(t => t.name === name);
  }

  // ---------- RENDER FUNCTIONS ----------
  const tableBody = document.getElementById("tableBody");
  const fixturesBody = document.getElementById("fixturesBody");
  const historyList = document.getElementById("historyList");

  function renderTable() {
    const sorted = sortTeams();
    tableBody.innerHTML = "";
    sorted.forEach((team, index) => {
      const tr = document.createElement("tr");
      const pos = index + 1;
      tr.innerHTML = `
        <td>${pos}</td>
        <td class="club-col">
          <div class="team">
            <img src="${team.logo}" alt="">
            <span>${team.name}</span>
          </div>
        </td>
        <td>${team.mp}</td>
        <td>${team.w}</td>
        <td>${team.d}</td>
        <td>${team.l}</td>
        <td>${team.gf}</td>
        <td>${team.ga}</td>
        <td>${gd(team)}</td>
        <td>${points(team)}</td>
      `;
      tableBody.appendChild(tr);
    });
  }

  function renderFixtures() {
    fixturesBody.innerHTML = "";
    const fixturesSorted = [...state.fixtures].sort((a, b) =>
      (a.date || "").localeCompare(b.date || "")
    );
    fixturesSorted.forEach(fx => {
      const tr = document.createElement("tr");
      const dateLabel = fx.date || "â€“";
      tr.innerHTML = `
        <td>${dateLabel}</td>
        <td class="club-col">
          <div class="team">
            <span>${fx.home}</span>
            <span style="margin:0 4px;">vs</span>
            <span>${fx.away}</span>
          </div>
        </td>
        <td>${fx.homeGoals} â€“ ${fx.awayGoals}</td>
      `;
      fixturesBody.appendChild(tr);
    });
  }

  function renderHistory() {
    historyList.innerHTML = "";
    const historySorted = [...state.history].sort((a, b) => b.timestamp - a.timestamp);
    historySorted.forEach(item => {
      const li = document.createElement("li");
      li.className = "history-item";
      li.innerHTML = `
        <div class="history-main">${item.text}</div>
        <div class="history-meta">${item.meta}</div>
      `;
      historyList.appendChild(li);
    });
  }

  function renderAll() {
    renderTable();
    renderFixtures();
    renderHistory();
  }

  // ---------- FORM / MATCH LOGIC ----------
  const matchForm = document.getElementById("matchForm");
  const homeSel = document.getElementById("homeTeam");
  const awaySel = document.getElementById("awayTeam");

  function populateTeamSelects() {
    initialTeams.forEach(t => {
      const opt1 = document.createElement("option");
      opt1.value = t.name;
      opt1.textContent = t.name;
      homeSel.appendChild(opt1);

      const opt2 = document.createElement("option");
      opt2.value = t.name;
      opt2.textContent = t.name;
      awaySel.appendChild(opt2);
    });
  }

  function recordMatch(date, home, away, hg, ag) {
    const homeTeam = findTeam(home);
    const awayTeam = findTeam(away);
    if (!homeTeam || !awayTeam) return;

    homeTeam.mp += 1;
    awayTeam.mp += 1;

    homeTeam.gf += hg;
    homeTeam.ga += ag;
    awayTeam.gf += ag;
    awayTeam.ga += hg;

    if (hg > ag) {
      homeTeam.w += 1;
      awayTeam.l += 1;
    } else if (hg < ag) {
      awayTeam.w += 1;
      homeTeam.l += 1;
    } else {
      homeTeam.d += 1;
      awayTeam.d += 1;
    }

    state.fixtures.push({ date, home, away, homeGoals: hg, awayGoals: ag });

    const scoreText = `${home} ${hg}â€“${ag} ${away}`;
    const meta = date ? date : "No date";
    state.history.push({
      timestamp: Date.now(),
      text: scoreText,
      meta
    });

    saveState();
    renderAll();
  }

  matchForm.addEventListener("submit", (e) => {
    e.preventDefault();
    const date = document.getElementById("matchDate").value;
    const home = homeSel.value;
    const away = awaySel.value;
    const hg = parseInt(document.getElementById("homeGoals").value, 10);
    const ag = parseInt(document.getElementById("awayGoals").value, 10);

    if (!home || !away || Number.isNaN(hg) || Number.isNaN(ag)) {
      alert("Please select both teams and enter goals.");
      return;
    }
    if (home === away) {
      alert("Home and away teams cannot be the same.");
      return;
    }

    recordMatch(date, home, away, hg, ag);

    matchForm.reset();
  });

  // ---------- TABS ----------
  const tabButtons = document.querySelectorAll(".tab-btn");
  const sections = document.querySelectorAll(".section");

  tabButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      const target = btn.dataset.target;
      tabButtons.forEach(b => b.classList.remove("active"));
      sections.forEach(s => s.classList.remove("active"));

      btn.classList.add("active");
      document.getElementById(target).classList.add("active");
    });
  });

  // ---------- THEME ----------
  const themeToggle = document.getElementById("themeToggle");

  function applyThemeFromStorage() {
    const saved = localStorage.getItem(THEME_KEY);
    if (saved === "light") {
      document.body.classList.add("light");
    }
  }

  function toggleTheme() {
    document.body.classList.toggle("light");
    const mode = document.body.classList.contains("light") ? "light" : "dark";
    localStorage.setItem(THEME_KEY, mode);
  }

  themeToggle.addEventListener("click", toggleTheme);

  // ---------- RESET ----------
  document.getElementById("resetAll").addEventListener("click", () => {
    if (!confirm("Reset all EPL data (table, fixtures, history)?")) return;
    state = {
      teams: createEmptyTeams(),
      fixtures: [],
      history: []
    };
    saveState();
    renderAll();
  });

  // ---------- INIT ----------
  loadState();
  applyThemeFromStorage();
  populateTeamSelects();
  renderAll();
</script>

</body>
</html>
